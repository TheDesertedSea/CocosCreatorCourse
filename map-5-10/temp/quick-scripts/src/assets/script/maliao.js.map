{"version":3,"sources":["assets\\script\\maliao.js"],"names":["Input","cc","Class","Component","properties","onLoad","_speed","speedState","v2","systemEvent","on","onKeydown","onKeyup","e","keyCode","update","dt","macro","KEY","a","left","x","d","right","w","up","y","s","down","lv","node","getComponent","RigidBody","linearVelocity"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst Input = {};\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this._speed = 200;\r\n        this.speedState = cc.v2(0,0);//移动方向状态\r\n        //this.state = '';//初始移动状态\r\n        //this.mlaAni = this.getComponent(cc.Animation);//获取动画组件\r\n\r\n        cc.systemEvent.on('keydown', this.onKeydown, this);\r\n        cc.systemEvent.on('keyup', this.onKeyup, this);\r\n    },\r\n\r\n    //更改移动状态\r\n    /* satState(state) {\r\n        if (this.state == state) return;\r\n\r\n        this.state = state;\r\n        this.mlaAni.play(this,state);\r\n    },\r\n */\r\n    onKeydown(e) {\r\n        Input[e.keyCode] = 1;\r\n    },\r\n\r\n    onKeyup(e) {\r\n        Input[e.keyCode] = 0;\r\n    },\r\n\r\n    //start () {},\r\n\r\n    update (dt) {\r\n        if(Input[cc.macro.KEY.a] || Input[cc.macro.KEY.left]) {\r\n            //设定向左移动方向\r\n            this.speedState.x = -1;\r\n        } else if(Input[cc.macro.KEY.d] || Input[cc.macro.KEY.right]) {\r\n            //设定向右移动方向\r\n            this.speedState.x = 1;\r\n        } else {\r\n            this.speedState.x = 0;\r\n        }\r\n\r\n        if(Input[cc.macro.KEY.w] || Input[cc.macro.KEY.up]) {\r\n            //设定向上移动方向\r\n            this.speedState.y = 1;\r\n        } else if(Input[cc.macro.KEY.s] || Input[cc.macro.KEY.down]) {\r\n            //设定向下移动方向\r\n            this.speedState.y = -1;\r\n        } else {\r\n            this.speedState.y = 0;\r\n        }\r\n\r\n        //通过物理引擎的方式来控制人物移动\r\n        this.lv = this.node.getComponent(cc.RigidBody).linearVelocity;//获取当前速度\r\n\r\n\r\n        if (this.speedState.x) {\r\n            this.lv.y = 0;\r\n            this.lv.x = this.speedState.x * this._speed;\r\n            //this.node.x += this.speedState.x * this._speed * dt;\r\n        } else if (this.speedState.y) {\r\n            this.lv.x = 0;\r\n            this.lv.y = this.speedState.y * this._speed;\r\n            //this.node.y += this.speedState.y * this._speed * dt;\r\n        } else {\r\n            this.lv.x = this.lv.y = 0;\r\n        }\r\n\r\n        //更新速度\r\n        this.node.getComponent(cc.RigidBody).linearVelocity = this.lv;\r\n\r\n        //移动动画的部分，需要提前设定移动动画组件，但样例中的移动方向只有4个\r\n        //与我们目标不符合，可能需要修改代码\r\n        /* let state = '';\r\n\r\n        if (this.sp.x == 1) {\r\n            state = 'hero_right';\r\n        } else if (this.sp.x == -1) {\r\n            state = 'hero_left';\r\n        } else if (this.sp.y == 1) {\r\n            state = 'hero_up';\r\n        } else if (this.sp.y == -1) {\r\n            state = 'hero_down';\r\n        }\r\n\r\n        if (state) {\r\n            this.setState(state);\r\n        }     */\r\n    },\r\n});\r\n"]}