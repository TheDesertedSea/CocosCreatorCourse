{"version":3,"sources":["assets\\script\\game.js"],"names":["cc","Class","Component","properties","tiledMap","TiledMap","onLoad","p","director","getPhysicsManager","enabled","debugDrawFlags","gravity","v2","start","tiledSize","getTileSize","layer","getLayer","layerSize","getLayerSize","i","width","j","height","tiled","getTiledTileAt","gid","node","group","body","addComponent","RigidBody","type","RigidBodyType","Static","collider","PhysicsBoxCollider","offset","size","apply"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,QAAQ,EAAEJ,EAAE,CAACK;AADL,GAHP;AAOL;AAEAC,EAAAA,MATK,oBASK;AACN,QAAIC,CAAC,GAAGP,EAAE,CAACQ,QAAH,CAAYC,iBAAZ,EAAR,CADM,CACkC;;AACxCF,IAAAA,CAAC,CAACG,OAAF,GAAY,IAAZ;AACAH,IAAAA,CAAC,CAACI,cAAF,GAAmB,IAAnB,CAHM,CAGkB;;AACxBJ,IAAAA,CAAC,CAACK,OAAF,GAAYZ,EAAE,CAACa,EAAH,CAAM,CAAN,EAAS,CAAT,CAAZ,CAJM,CAIkB;AAE3B,GAfI;AAiBLC,EAAAA,KAjBK,mBAiBI;AACL,QAAIC,SAAS,GAAG,KAAKX,QAAL,CAAcY,WAAd,EAAhB,CADK,CACuC;;AAC5C,QAAIC,KAAK,GAAG,KAAKb,QAAL,CAAcc,QAAd,CAAuB,MAAvB,CAAZ,CAFK,CAEsC;;AAC3C,QAAIC,SAAS,GAAGF,KAAK,CAACG,YAAN,EAAhB,CAHK,CAGgC;;AAErC,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,SAAS,CAACG,KAA9B,EAAqCD,CAAC,EAAtC,EAA0C;AACtC,WAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,SAAS,CAACK,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACvC,YAAIE,KAAK,GAAGR,KAAK,CAACS,cAAN,CAAqBL,CAArB,EAAwBE,CAAxB,EAA2B,IAA3B,CAAZ,CADuC,CACM;;AAC7C,YAAIE,KAAK,CAACE,GAAN,IAAa,CAAjB,EAAoB;AAChBF,UAAAA,KAAK,CAACG,IAAN,CAAWC,KAAX,GAAmB,MAAnB;AAEA,cAAIC,IAAI,GAAGL,KAAK,CAACG,IAAN,CAAWG,YAAX,CAAwB/B,EAAE,CAACgC,SAA3B,CAAX,CAHgB,CAGiC;;AACjDF,UAAAA,IAAI,CAACG,IAAL,GAAYjC,EAAE,CAACkC,aAAH,CAAiBC,MAA7B,CAJgB,CAIoB;;AACpC,cAAIC,QAAQ,GAAGX,KAAK,CAACG,IAAN,CAAWG,YAAX,CAAwB/B,EAAE,CAACqC,kBAA3B,CAAf,CALgB,CAK+C;AAC/D;;AACAD,UAAAA,QAAQ,CAACE,MAAT,GAAkBtC,EAAE,CAACa,EAAH,CAAME,SAAS,CAACO,KAAV,GAAkB,CAAxB,EAA2BP,SAAS,CAACS,MAAV,GAAmB,CAA9C,CAAlB,CAPgB,CAOoD;;AACpEY,UAAAA,QAAQ,CAACG,IAAT,GAAgBxB,SAAhB,CARgB,CAQW;;AAC3BqB,UAAAA,QAAQ,CAACI,KAAT;AACH;AACJ;AACJ;AACJ,GAtCI,CAwCL;;AAxCK,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        tiledMap: cc.TiledMap\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        let p = cc.director.getPhysicsManager();//获取物理引擎属性并启用\r\n        p.enabled = true;\r\n        p.debugDrawFlags = true;//方便调试\r\n        p.gravity = cc.v2(0, 0);//关闭重力\r\n\r\n    },\r\n\r\n    start () {\r\n        let tiledSize = this.tiledMap.getTileSize();//获取每一块的尺寸\r\n        let layer = this.tiledMap.getLayer('wall');//获取墙壁层\r\n        let layerSize = layer.getLayerSize();//获取尺寸以块为单位\r\n\r\n        for (let i = 0; i < layerSize.width; i++) {\r\n            for (let j = 0; j < layerSize.height; j++) {\r\n                let tiled = layer.getTiledTileAt(i, j, true);//获取单独的一块\r\n                if (tiled.gid != 0) {\r\n                    tiled.node.group = 'wall';\r\n\r\n                    let body = tiled.node.addComponent(cc.RigidBody);//动态添加组件\r\n                    body.type = cc.RigidBodyType.Static;//设置为静态\r\n                    let collider = tiled.node.addComponent(cc.PhysicsBoxCollider); //添加碰撞区域\r\n                    //调整属性\r\n                    collider.offset = cc.v2(tiledSize.width / 2, tiledSize.height / 2); //偏移量设为中心点的位置\r\n                    collider.size = tiledSize; //包围盒的大小设为一块的大小\r\n                    collider.apply();\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}